!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).mrujs={})}(this,(function(e){"use strict";const t=new WeakMap;function n(e){const n=function(e){const t=e instanceof Element?e:e instanceof Node?e.parentElement:null,n=null!=t?t.closest("input, button"):null;return null!=n&&"submit"===n.type?n:null}(e.target);null!=(null==n?void 0:n.form)&&t.set(n.form,n)}var r;function o(e){return Array.isArray(e)?e:null!=Array.from?Array.from(e):[].slice.call(e)}!function(){let e=Event.prototype;const r=navigator.vendor.includes("Apple Computer");if("SubmitEvent"in window){if(!r)return;e=window.SubmitEvent.prototype}"submitter"in e||(addEventListener("click",n,!0),Object.defineProperty(e,"submitter",{get(){if("submit"===this.type&&this.target instanceof HTMLFormElement)return t.get(this.target)}}))}();const i=null!==(r=Element.prototype.matches)&&void 0!==r?r:Element.prototype.webkitMatchesSelector;function l(e,t){return e instanceof Element&&("string"==typeof t?i.call(e,t):i.call(e,t.selector)&&!i.call(e,t.exclude))}let a="form",c="a";null!=window.Turbo&&(a='form[data-turbo="false"]',c='a[data-turbo="false"]');const u="data-remote",s="data-method",d="data-disable",f=`${d}-with`,m={remoteSelector:`a[${u}="true"], a[${s}], form[${u}="true"]`,linkClickSelector:`a[data-confirm], ${c}[${s}], ${c}[${u}]:not([disabled]), ${c}[${f}], ${c}[${d}]`,buttonClickSelector:{selector:`button[${u}]:not([form]), button[data-confirm]:not([form]), button[${f}]:not([form]), button[${d}]:not([form])`,exclude:"form button"},inputChangeSelector:`select[${u}], input[${u}], textarea[${u}]`,formSubmitSelector:`${a}`,formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",formDisableSelector:`input[${f}]:enabled, button[${f}]:enabled, textarea[${f}]:enabled, input[${d}]:enabled, button[${d}]:enabled, textarea[${d}]:enabled`,formEnableSelector:`input[${f}]:disabled, button[${f}]:disabled, textarea[${f}]:disabled, input[${d}]:disabled, button[${d}]:disabled, textarea[${d}]:disabled`,linkDisableSelector:`a[${f}], a[${d}]`,buttonDisableSelector:`button[data-remote][${f}], button[data-remote][${d}]`,fileInputSelector:"fileInputSelector: 'input[name][type=file]:not([disabled])'"};function b(e,t){e.forEach((e=>{const{selectors:n,event:r}=e;g(n.map(w).join(", ")).forEach((e=>{n.forEach((n=>{l(e,n)&&t.forEach((t=>e.addEventListener(r,t)))}))}))}))}function h(e,t){e.forEach((e=>{const{selectors:n,event:r}=e;g(n.map(w).join(", ")).forEach((e=>{n.forEach((n=>{l(e,n)&&t.forEach((t=>e.removeEventListener(r,t)))}))}))}))}function p(e,t,n){e.forEach((e=>{e.selectors.forEach((r=>{t.forEach((t=>{l(t,r)&&n.forEach((n=>t.addEventListener(e.event,n))),t instanceof Element&&t.querySelectorAll(w(r)).forEach((t=>{n.forEach((n=>t.addEventListener(e.event,n)))}))}))}))}))}function v(e,t){return l(e,"form")?Array.from(e.elements).filter((e=>l(e,t))):o(e.querySelectorAll(w(t)))}function g(e){return o(document.querySelectorAll(e))}function w(e){let t;return t="string"==typeof e?e:e.selector,t}const S={bubbles:!0,cancelable:!0};function E(e,t={}){const n=new CustomEvent(e,{...S,...t});return this.dispatchEvent(n),n}function C(e,t,n={}){return!E.call(e,t,n).defaultPrevented}function y(e){null!=e.target&&C(e.target,"ujs:everythingStopped"),e.stopPropagation(),e.stopImmediatePropagation(),e.preventDefault()}const k="ajax:before",j="ajax:beforeSend",A="ajax:response:error",T="ajax:request:error",R="ajax:success",N="ajax:error",x="ajax:complete",q="ajax:stopped";function P(e,t,n,r){e.addEventListener(n,(e=>{let n=e.target;for(;n instanceof Element&&!l(n,t);)n=n.parentNode;n instanceof Element&&!1===r.call(n,e)&&(e.preventDefault(),e.stopPropagation())}))}function L(e){var t;return e.submitter instanceof HTMLElement?e.submitter:null===(t=e.detail)||void 0===t?void 0:t.submitter}function D(e){return new URL(e.toString(),document.baseURI)}function $(...e){const t={};for(const n of e)for(const[e,r]of n)t[e]=r;return new Headers(t)}function H(e){return"get"===e.toLowerCase()}function M(e){let t,n;const r=e.ok,o=e.status,i=!r,l=e.status>=400&&e.status<=499,a=e.status>=500&&e.status<=599,c=e.redirected,u=D(e.url),s=b("content-type"),d=Boolean(null==s?void 0:s.match(/^(?:text\/([^\s;,]+\b)?html|application\/xhtml\+xml)\b/)),f=Boolean(null==s?void 0:s.toLowerCase().match(/(^application\/json|\.json)/));async function m(){return null!=t||(t=await e.clone().text()),t}function b(t){return e.headers.get(t)}return{succeeded:r,failed:i,redirected:c,clientError:l,serverError:a,location:u,contentType:s,getHeader:b,isHtml:d,isJson:f,text:m,html:async function(){return d?await m():await Promise.reject(e)},json:async function(){return f?(null!=n||(n=JSON.parse(await m())),n):await Promise.reject(e)},response:e,status:o}}const I="application/x-www-form-urlencoded",O="multipart/form-data",U="text/plain";function F(e){return new URLSearchParams(function(e){return[...e].reduce(((e,[t,n])=>e.concat("string"==typeof n?[[t,n]]:[])),[])}(e))}const z={"*":"*/*",any:"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript",script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"};function W(e){var t,n,r;const o={...null!==(n=null===(t=window.mrujs)||void 0===t?void 0:t.mimeTypes)&&void 0!==n?n:z};return null==e?null!==(r=null==o?void 0:o.any)&&void 0!==r?r:"*/*":(e=e.trim(),null!=o&&Object.keys(o).includes(e)&&(e=o[e]),e.includes("*/*")?e:`${e}, */*; q=0.01`)}function V(e){(function(e){return!function(e){return null!=e.target&&e.target.isContentEditable||e.defaultPrevented||e.button>0||e.altKey||e.ctrlKey||e.metaKey||e.shiftKey}(e)})(e)||y(e)}function B(e){var t;const n=g(`meta[name="${e}"]`),r=n[n.length-1];return null!==(t=null==r?void 0:r.content)&&void 0!==t?t:void 0}function K(){J()}function X(){}function G(e){for(let n=0;n<e.length;n++)(t=e[n])instanceof HTMLMetaElement&&t.matches('meta[name="csrf-token]"')&&J();var t}function J(){const e=_(),t=Q();null!=e&&null!=t&&g(`form input[name="${t}"]`).forEach((t=>{t.value=e}))}function _(){var e;return null!==(e=function(e){if(null!=e){const t=(""!==document.cookie.trim()?document.cookie.split("; "):[]).find((t=>t.startsWith(e)));if(null!=t){const e=t.split("=").slice(1).join("=");return""!==e.trim()?decodeURIComponent(e):void 0}}}(Q()))&&void 0!==e?e:B("csrf-token")}function Q(){return B("csrf-param")}function Y(e){const t=_();null!=t&&null==e.headers.get("X-CSRF-TOKEN")&&e.headers.set("X-CSRF-TOKEN",t)}function Z(e,t={}){const n=new AbortController,r=n.signal;let o,i,l,a="get",c=!1;a=function(e){var t,n;return null!==(n=null===(t=e.method)||void 0===t?void 0:t.toLowerCase())&&void 0!==n?n:"get"}(t),c=H(a);const u=function(e){var t;return null!==(t=e.body)&&void 0!==t?t:new URLSearchParams}(t);e instanceof Request?(i=ee(e.url,c,u),l=function(e){o=$(d(),e.headers);const t={...f(),...e};return c&&delete t.body,new Request(i,t)}(e)):(i=ee(e,c,u),l=function(){o=$(d(),new Headers(t.headers));const e={...f(),...t};return e.headers=o,c&&delete e.body,new Request(i,e)}()),c||Y(l),o=l.headers;const s=i.searchParams;return{request:l,method:a,url:i,body:u,params:s,abortController:n,abortSignal:r,cancel:function(e){if(n.abort(),null!=e){y(e);const{element:t}=e.detail;E.call(t,q,{detail:{...e.detail}})}},headers:o,isGetRequest:c};function d(){return new Headers({Accept:"*/*","X-REQUESTED-WITH":"XmlHttpRequest"})}function f(){const e={method:a,headers:o,credentials:"same-origin",redirect:"follow",signal:r};return c||(e.body=u),e}}function ee(e,t,n){const r=D(e);return t?function(e,t){const n=new URLSearchParams(e.search);for(const[r,o]of t)o instanceof File||"authenticity_token"!==r&&(n.has(r)?(n.delete(r),e.searchParams.set(r,o)):e.searchParams.append(r,o));return e}(r,function(e){return e instanceof URLSearchParams?Array.from(e.entries()):[]}(n)):r}function te(e){let t;if(t=e instanceof Event?e.target:e,null==t)return;const{linkDisableSelector:n,buttonDisableSelector:r,formDisableSelector:o,formSubmitSelector:i}=window.mrujs;l(t,n)?function(e){if(null!=e.dataset.ujsDisabled)return;const t=e.dataset.disableWith;null!=t&&(e.dataset.ujsEnableWith=e.innerHTML,e.innerHTML=t),e.addEventListener("click",y),e.dataset.ujsDisabled="true"}(t):l(t,r)||l(t,o)?ne(t):l(t,i)&&function(e){v(e,window.mrujs.formDisableSelector).forEach((e=>ne(e)))}(t)}function ne(e){if(null!=e.dataset.ujsDisabled)return;const t=e.getAttribute("data-disable-with");null!=t&&(l(e,"button")?(e.dataset.ujsEnableWith=e.innerHTML,e.innerHTML=t):(e.dataset.ujsEnableWith=e.value,e.value=t)),e.dataset.ujsDisabled="true",setTimeout((()=>{e.disabled=!0}))}function re(){de("addEventListener")}function oe(){de("removeEventListener")}function ie(e){if(e.defaultPrevented)return;const t=fe(e),n=L(e);if("true"!==t.dataset.remote)return;if(me(t))return;if(me(n))return;null!=n&&te(n),e.preventDefault();const{fetchRequest:r,request:o}=function(e,t){const n=D(function(e,t){var n,r;return null!==(r=null!==(n=null==t?void 0:t.getAttribute("formaction"))&&void 0!==n?n:e.getAttribute("action"))&&void 0!==r?r:""}(e,t)),r=function(e,t){const n=function(e,t){var n,r;return(null!==(r=null!==(n=null==t?void 0:t.getAttribute("formmethod"))&&void 0!==n?n:e.getAttribute("method"))&&void 0!==r?r:"get").toLowerCase()}(e,t),r=function(e){let t;null!=e&&(t=e.dataset.type);const n=W(t),r=new Headers({Accept:n});return r.set("Accept",n),r}(e),o={method:n,headers:r};return o.body=function(e,t,n){const r=function(e,t){return function(e,t){const n=new FormData(e);let r,o;return null!=t&&(r=t.getAttribute("name"),o=t.getAttribute("value")),null!=r&&null!=o&&n.get(r)!==o&&n.append(r,o),n}(e,t)}(e,n);return function(e,t){var n,r;const o=e.getAttribute("enctype");return function(e){switch(e.toLowerCase()){case O:return O;case U:return U;default:return I}}(null!==(r=null!==(n=null==t?void 0:t.getAttribute("formenctype"))&&void 0!==n?n:o)&&void 0!==r?r:I)}(e,n)===I||H(t)?F(r):r}(e,n,t),o}(e,t),o=Z(n,r);return{fetchRequest:o,request:o.request,element:e,submitter:t}}(t,n),i={element:t,fetchRequest:r,request:o,submitter:n};E.call(t,k,{detail:i})}function le(e){const{element:t,fetchRequest:n,request:r,submitter:o}=e.detail;e.defaultPrevented||me(t)||me(o)?se(e):E.call(t,j,{detail:{element:t,fetchRequest:n,request:r,submitter:o}})}function ae(e){const{element:t,request:n,submitter:r}=e.detail;e.defaultPrevented||me(t)||me(r)?se(e):(E.call(t,"ajax:send",{detail:{...e.detail}}),window.fetch(n).then((t=>{const n=M(t),{response:r}=n;!function({element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i}){const l=null==o?void 0:o.status;!0!==(null==r?void 0:r.succeeded)?E.call(e,A,{detail:{element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i,status:l}}):E.call(e,R,{detail:{element:e,fetchRequest:t,request:n,fetchResponse:r,response:o,submitter:i,status:l}})}({...e.detail,fetchResponse:n,response:r})})).catch((t=>function({element:e,fetchRequest:t,request:n,error:r,submitter:o}){E.call(e,T,{detail:{element:e,fetchRequest:t,request:n,error:r,submitter:o}})}({...e.detail,error:t}))))}function ce(e){e.defaultPrevented?se(e):E.call(fe(e),x,{detail:{...e.detail}})}function ue(e){e.defaultPrevented?se(e):E.call(fe(e),N,{detail:{...e.detail}})}function se(e){E.call(fe(e),q,{detail:{...e.detail}})}function de(e){document[e]("submit",ie),document[e](k,le),document[e](j,ae),document[e](R,ce),document[e](T,ue),document[e](A,ue),document[e](N,ce)}function fe(e){return e.target}function me(e){return"false"===(null==e?void 0:e.dataset.ujsSubmit)}function be(e){null!=e&&null==e.getAttribute("data-turbo")&&e.setAttribute("data-turbo","false")}function he(e){(function(e){if(null==e.currentTarget)return!0;const t=e.currentTarget,n=t.dataset.confirm;if(null==n)return!0;let r=!1;try{r=window.mrujs.confirm(n)}catch(e){console.warn('The following error was encountered when calling: "mrujs.confirm"\n\n'),console.error(e)}const o=E.call(t,"confirm:complete",{detail:{answer:r}});return r&&!o.defaultPrevented})(e)||y(e)}function pe(e){let t;null!=e&&(t=e.dataset.type);const n=W(t),r=new Headers({Accept:n});return r.set("Accept",n),r}function ve(e){var t;const n=e.currentTarget;if("false"===n.dataset.remote)return;if(null==n.dataset.method&&"true"!==n.dataset.remote)return;if(null==(null!==(t=n.getAttribute("href"))&&void 0!==t?t:n.dataset.url))return;e.preventDefault();const r=e.target,o=function(e){var t,n;const r=function(e){var t;return(null!==(t=e.dataset.method)&&void 0!==t?t:"get").toLowerCase()}(e);let o;(null===(t=window.mrujs)||void 0===t?void 0:t.maskLinkMethods)&&(o=function(e){return H(e)?"get":"post"}(r));const i=null!==(n=e.getAttribute("href"))&&void 0!==n?n:e.dataset.url;if(null==i)throw Error(`No 'href' or 'data-url' found on ${JSON.stringify(e)}`);const l=D(i),a={headers:pe(e)};a.method=null!=o?o:r,H(r)||(a.body=function(e,t){const n=F(function(e){var t;const n=new FormData;return(null===(t=window.mrujs)||void 0===t?void 0:t.maskLinkMethods)&&n.append("_method",e),n}(e)),r=t.getAttribute("name"),o=t.value;null!=r&&null!=o&&n.append(r,o);const i=function(e){if(null!=e){var t;t=e,decodeURI(t)!==decodeURIComponent(t)&&(e=decodeURIComponent(e));try{return Object.entries(JSON.parse(e))}catch(e){}try{return new URLSearchParams(e).entries()}catch(e){}}}(t.getAttribute("data-params"));if(null==i)return n;for(const[e,t]of i){if(null==t)continue;const r=t.toString();("string"==typeof r||r instanceof String)&&n.append(e,r.toString())}return n}(r,e));const c=Z(l,a);return{request:c.request,fetchRequest:c}}(n),{fetchRequest:i,request:l}=o;E.call(n,j,{detail:{element:n,fetchRequest:i,request:l,submitter:r}})}var ge,we="undefined"==typeof document?void 0:document,Se=!!we&&"content"in we.createElement("template"),Ee=!!we&&we.createRange&&"createContextualFragment"in we.createRange();function Ce(e,t){var n,r,o=e.nodeName,i=t.nodeName;return o===i||(n=o.charCodeAt(0),r=i.charCodeAt(0),n<=90&&r>=97?o===i.toUpperCase():r<=90&&n>=97&&i===o.toUpperCase())}function ye(e,t,n){e[n]!==t[n]&&(e[n]=t[n],e[n]?e.setAttribute(n,""):e.removeAttribute(n))}var ke={OPTION:function(e,t){var n=e.parentNode;if(n){var r=n.nodeName.toUpperCase();"OPTGROUP"===r&&(r=(n=n.parentNode)&&n.nodeName.toUpperCase()),"SELECT"!==r||n.hasAttribute("multiple")||(e.hasAttribute("selected")&&!t.selected&&(e.setAttribute("selected","selected"),e.removeAttribute("selected")),n.selectedIndex=-1)}ye(e,t,"selected")},INPUT:function(e,t){ye(e,t,"checked"),ye(e,t,"disabled"),e.value!==t.value&&(e.value=t.value),t.hasAttribute("value")||e.removeAttribute("value")},TEXTAREA:function(e,t){var n=t.value;e.value!==n&&(e.value=n);var r=e.firstChild;if(r){var o=r.nodeValue;if(o==n||!n&&o==e.placeholder)return;r.nodeValue=n}},SELECT:function(e,t){if(!t.hasAttribute("multiple")){for(var n,r,o=-1,i=0,l=e.firstChild;l;)if("OPTGROUP"===(r=l.nodeName&&l.nodeName.toUpperCase()))l=(n=l).firstChild;else{if("OPTION"===r){if(l.hasAttribute("selected")){o=i;break}i++}!(l=l.nextSibling)&&n&&(l=n.nextSibling,n=null)}e.selectedIndex=o}}};function je(){}function Ae(e){if(e)return e.getAttribute&&e.getAttribute("id")||e.id}var Te=function(e,t,n){if(n||(n={}),"string"==typeof t)if("#document"===e.nodeName||"HTML"===e.nodeName||"BODY"===e.nodeName){var r=t;(t=we.createElement("html")).innerHTML=r}else o=(o=t).trim(),t=Se?function(e){var t=we.createElement("template");return t.innerHTML=e,t.content.childNodes[0]}(o):Ee?function(e){return ge||(ge=we.createRange()).selectNode(we.body),ge.createContextualFragment(e).childNodes[0]}(o):function(e){var t=we.createElement("body");return t.innerHTML=e,t.childNodes[0]}(o);var o,i=n.getNodeKey||Ae,l=n.onBeforeNodeAdded||je,a=n.onNodeAdded||je,c=n.onBeforeElUpdated||je,u=n.onElUpdated||je,s=n.onBeforeNodeDiscarded||je,d=n.onNodeDiscarded||je,f=n.onBeforeElChildrenUpdated||je,m=!0===n.childrenOnly,b=Object.create(null),h=[];function p(e){h.push(e)}function v(e,t){if(1===e.nodeType)for(var n=e.firstChild;n;){var r=void 0;t&&(r=i(n))?p(r):(d(n),n.firstChild&&v(n,t)),n=n.nextSibling}}function g(e,t,n){!1!==s(e)&&(t&&t.removeChild(e),d(e),v(e,n))}function w(e){a(e);for(var t=e.firstChild;t;){var n=t.nextSibling,r=i(t);if(r){var o=b[r];o&&Ce(t,o)?(t.parentNode.replaceChild(o,t),S(o,t)):w(t)}else w(t);t=n}}function S(e,t,n){var r=i(t);if(r&&delete b[r],!n){if(!1===c(e,t))return;if(function(e,t){var n,r,o,i,l=t.attributes;if(11!==t.nodeType&&11!==e.nodeType){for(var a=l.length-1;a>=0;a--)r=(n=l[a]).name,o=n.namespaceURI,i=n.value,o?(r=n.localName||r,e.getAttributeNS(o,r)!==i&&("xmlns"===n.prefix&&(r=n.name),e.setAttributeNS(o,r,i))):e.getAttribute(r)!==i&&e.setAttribute(r,i);for(var c=e.attributes,u=c.length-1;u>=0;u--)r=(n=c[u]).name,(o=n.namespaceURI)?(r=n.localName||r,t.hasAttributeNS(o,r)||e.removeAttributeNS(o,r)):t.hasAttribute(r)||e.removeAttribute(r)}}(e,t),u(e),!1===f(e,t))return}"TEXTAREA"!==e.nodeName?function(e,t){var n,r,o,a,c,u=t.firstChild,s=e.firstChild;e:for(;u;){for(a=u.nextSibling,n=i(u);s;){if(o=s.nextSibling,u.isSameNode&&u.isSameNode(s)){u=a,s=o;continue e}r=i(s);var d=s.nodeType,f=void 0;if(d===u.nodeType&&(1===d?(n?n!==r&&((c=b[n])?o===c?f=!1:(e.insertBefore(c,s),r?p(r):g(s,e,!0),s=c):f=!1):r&&(f=!1),(f=!1!==f&&Ce(s,u))&&S(s,u)):3!==d&&8!=d||(f=!0,s.nodeValue!==u.nodeValue&&(s.nodeValue=u.nodeValue))),f){u=a,s=o;continue e}r?p(r):g(s,e,!0),s=o}if(n&&(c=b[n])&&Ce(c,u))e.appendChild(c),S(c,u);else{var m=l(u);!1!==m&&(m&&(u=m),u.actualize&&(u=u.actualize(e.ownerDocument||we)),e.appendChild(u),w(u))}u=a,s=o}!function(e,t,n){for(;t;){var r=t.nextSibling;(n=i(t))?p(n):g(t,e,!0),t=r}}(e,s,r);var h=ke[e.nodeName];h&&h(e,t)}(e,t):ke.TEXTAREA(e,t)}!function e(t){if(1===t.nodeType||11===t.nodeType)for(var n=t.firstChild;n;){var r=i(n);r&&(b[r]=n),e(n),n=n.nextSibling}}(e);var E,C,y=e,k=y.nodeType,j=t.nodeType;if(!m)if(1===k)1===j?Ce(e,t)||(d(e),y=function(e,t){for(var n=e.firstChild;n;){var r=n.nextSibling;t.appendChild(n),n=r}return t}(e,(E=t.nodeName,(C=t.namespaceURI)&&"http://www.w3.org/1999/xhtml"!==C?we.createElementNS(C,E):we.createElement(E)))):y=t;else if(3===k||8===k){if(j===k)return y.nodeValue!==t.nodeValue&&(y.nodeValue=t.nodeValue),y;y=t}if(y===t)d(e);else{if(t.isSameNode&&t.isSameNode(y))return;if(S(y,t,m),h)for(var A=0,T=h.length;A<T;A++){var R=b[h[A]];R&&g(R,R.parentNode,!1)}}return!m&&y!==e&&e.parentNode&&(y.actualize&&(y=y.actualize(e.ownerDocument||we)),e.parentNode.replaceChild(y,e)),y};const Re=["advance","replace","restore"];function Ne(){document.addEventListener("ajax:complete",qe),document.addEventListener("ajax:beforeNavigation",Ie)}function xe(){document.removeEventListener("ajax:complete",qe),document.removeEventListener("ajax:beforeNavigation",Ie)}function qe(e){e.defaultPrevented||E.call(e.detail.element,"ajax:beforeNavigation",{detail:{...e.detail}})}function Pe(){return Le()?window.Turbolinks:De()?window.Turbo:void 0}function Le(){return null!=window.Turbolinks&&!0===window.Turbolinks.supported}function De(){return null!=window.Turbo}function $e({html:e,url:t}){!function(e,t){if(""===t)return;const n=He(Pe());null==n||n.put(D(e),t)}(D(t),Ue(e))}function He(e){if(null!=e)return Le()?e.controller.cache:De()?e.navigator.view.snapshotCache:void 0}function Me(e){var t;const n=D(e),r=He(Pe());return null!==(t=null==r?void 0:r.has(n))&&void 0!==t&&t}function Ie(e){if(e.defaultPrevented)return;const{element:t,fetchResponse:n,fetchRequest:r}=e.detail;(function(e,t){return!("false"===e.dataset.ujsNavigate||null==t||!t.isHtml||e instanceof HTMLFormElement&&t.succeeded&&!t.redirected&&(console.error("Successful form submissions must redirect"),1))})(t,n)&&Oe(t,r,n)}function Oe(e,t,n,r){r=null!=r?r:function(e){var t,n;let r=null!==(n=null!==(t=e.dataset.turbolinksAction)&&void 0!==t?t:e.dataset.turboAction)&&void 0!==n?n:"advance";return Re.includes(r)||(r="advance"),r}(e);let o=D(window.location.href);(null==t?void 0:t.isGetRequest)&&(o=t.url),n.redirected&&(o=n.location);const i=(l=window.location.href,D(o).href===D(l).href);var l;let a="morphdom";if("turbo"!==window.mrujs.errorRenderer&&"turbo"!==e.getAttribute("data-ujs-error-renderer")||(a="turbo"),n.failed||i)return void Fe(e,n,!i,a);const c=Pe();null!=c?(c.clearCache(),function(e,t,n){const r=Pe();null!=r&&e.html().then((e=>{$e({html:e,url:t}),n="restore",r.visit(t,{action:n})})).catch((e=>console.error(e)))}(n,o,r)):Fe(e,n,i,a)}function Ue(e){var t,n,r;const o=Pe();return null==o?"":Le()?null!==(t=o.Snapshot.wrap(e))&&void 0!==t?t:"":De()&&function(){const e=Pe();return!(null==e||!Le()&&(!De()||null==e.PageSnapshot&&(console.warn("The version of Turbo you are currently using does not support snapshot generation. Please consider upgrading your version of Turbo."),1)))}()&&null!==(r=null===(n=o.PageSnapshot)||void 0===n?void 0:n.fromHTMLString(e))&&void 0!==r?r:""}function Fe(e,t,n=!1,r="morphdom"){t.isHtml&&t.html().then((o=>{var i;if("turbo"===r)!function(e){const t=Pe();null==t||t.navigator.view.renderError(Ue(e))}(o);else if("morphdom"===r){const t=e.getAttribute("data-ujs-morph-root");let n=document.body;null!=t&&(n=""===t.trim()?e:null!==(i=document.querySelector(t))&&void 0!==i?i:document.body),function(e,t=document.body){const n=document.createElement("template");n.innerHTML=String(e).trim(),Te(t,n.content,{childrenOnly:!0})}(o,n)}n&&window.history.pushState({},"",t.location)})).catch((e=>{console.error(e)}))}function ze(e){!0===this.disabled&&y(e)}function We(e){let t=e;e instanceof Event&&(t=e.target);const{linkDisableSelector:n,buttonDisableSelector:r,formEnableSelector:o,formSubmitSelector:i}=window.mrujs;l(t,n)?function(e){const t=e.dataset.ujsEnableWith;null!=t&&(e.innerHTML=t,e.removeAttribute("data-ujs-enable-with")),e.removeEventListener("click",y),e.removeAttribute("data-ujs-disabled")}(t):l(t,r)||l(t,o)?Be(t):l(t,i)&&Ve(t)}function Ve(e){v(e,window.mrujs.formEnableSelector).forEach(Be)}function Be(e){const t=e.dataset.ujsEnableWith;null!=t&&(l(e,"button")?e.innerHTML=t:e.value=t,e.removeAttribute("data-ujs-enable-with")),e.disabled=!1,e.removeAttribute("data-ujs-disabled")}function Ke(e={}){var t;e.connected=!1,(e={...m}).FetchResponse=M,e.FetchRequest=Z,e.addedNodesObserver=function(e){const t=new MutationObserver(e);return{name:"AddedNodesObserver",connect:function(){t.observe(document,{childList:!0,subtree:!0,attributes:!0})},disconnect:function(){t.disconnect()}}}(Ze),e.remoteWatcher=function(){let e;return{name:"RemoteWatcher",initialize:function(){e=window.mrujs.remoteSelector},connect:function(){g(e).forEach((e=>{be(e)}))},disconnect:function(){},observerCallback:function(t){t.forEach((t=>{l(t,window.mrujs.remoteSelector)&&be(t),t instanceof Element&&t.querySelectorAll(e).forEach((e=>{be(e)}))}))}}}(),e.elementEnabler=function(){const e=[We];let t=[];return{name:"ElementEnabler",initialize:function(){t=function(){const{formSubmitSelector:e,buttonDisableSelector:t,linkDisableSelector:n,inputChangeSelector:r}=window.mrujs,o=[n,t,e,r];return[{event:x,selectors:o},{event:q,selectors:o},{event:"turbo:submit-end",selectors:o}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},callbacks:e}}(),e.elementDisabler=function(){const e=[te];let t=[];return{name:"ElementDisabler",initialize:function(){t=function(){const{formSubmitSelector:e,linkClickSelector:t,buttonClickSelector:n,inputChangeSelector:r}=window.mrujs;return[{event:"click",selectors:[n,t]},{event:"ajax:send",selectors:[e]},{event:"turbo:submit-start",selectors:["form"]},{event:"change",selectors:[r]}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},queries:t}}(),e.disabledElementChecker=function(){const e=[ze];let t=[];return{name:"DisabledElementChecker",initialize:function(){t=function(){const{linkClickSelector:e,buttonClickSelector:t,inputChangeSelector:n,formSubmitSelector:r,formInputClickSelector:o}=window.mrujs;return[{event:"click",selectors:[t,e,o]},{event:"change",selectors:[n]},{event:"submit",selectors:[r]}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},queries:t,callbacks:e}}(),e.navigationAdapter=function(){const e={name:"NavigationAdapter",connect:Ne,disconnect:xe,cacheContains:Me,prefetch:$e,navigate:Oe};return Object.defineProperties(e,{adapter:{get:function(){return Pe()}},snapshotCache:{get:function(){return He(Pe())}}}),e}(),e.clickHandler=function(){const e=[V];let t=[];return{name:"ClickHandler",initialize:function(){t=function(){const{linkClickSelector:e,buttonClickSelector:t,formInputClickSelector:n}=window.mrujs;return[{event:"click",selectors:[e,t,n]}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},queries:t,callbacks:e}}(),e.confirmClass=function(){const e=[he];let t=[];return{name:"Confirm",initialize:function(){t=function(){const{linkClickSelector:e,buttonClickSelector:t,formInputClickSelector:n,inputChangeSelector:r,formSubmitSelector:o}=window.mrujs;return[{event:"click",selectors:[e,t,n]},{event:"change",selectors:[r]},{event:"submit",selectors:[o]}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},queries:t,callbacks:e}}(),e.csrf={name:"Csrf",connect:K,disconnect:X,observerCallback:G},e.method=function(){const e=[ve];let t=[];return{name:"Method",initialize:function(){t=function(){const{linkClickSelector:e,inputChangeSelector:t,buttonClickSelector:n}=window.mrujs;return[{event:"click",selectors:[e,n]},{event:"change",selectors:[t]}]}()},connect:function(){b(t,e)},disconnect:function(){h(t,e)},observerCallback:function(n){p(t,n,e)},queries:t,callbacks:e}}(),e.formSubmitDispatcher={name:"FormSubmitDispatcher",connect:re,disconnect:oe};const n=[e.addedNodesObserver,e.remoteWatcher,e.csrf,e.elementEnabler,e.clickHandler,e.disabledElementChecker,e.confirmClass,e.elementDisabler,e.method,e.formSubmitDispatcher,e.navigationAdapter];e.corePlugins=n;const r=null!==(t=e.plugins)&&void 0!==t?t:[];e.plugins=r;const i=n.concat(r);return e.allPlugins=i,e.maskLinkMethods=!0,e.mimeTypes={...z},e.stop=Ge,e.restart=Je,e.fetch=et,e.urlEncodeFormData=F,e.registerMimeTypes=tt,e.enableElement=We,e.enableFormElements=Ve,e.enableFormElement=Be,e.disableElement=te,e.stopEverything=y,e.dispatch=E,e.addListeners=b,e.removeListeners=h,e.attachObserverCallback=p,e.expandUrl=D,e.findSubmitter=L,e.$=g,e.CSRFProtection=Y,e.csrfParam=Q,e.csrfToken=_,e.cspNonce=rt,e.confirm=Ye,e.handleConfirm=he,e.handleDisabledElement=ze,e.handleMethod=ve,e.start=Xe,e.preventInsignificantClick=V,e.refreshCSRFTokens=J,e.delegate=P,e.fire=C,e.formElements=v,e.matches=l,e.toArray=o,e}function Xe(e={}){var t;if(window.Rails=window.mrujs=this,window.mrujs.connected)return window.mrujs;Object.assign(this,e),this.allPlugins=this.corePlugins.concat(this.plugins);for(let e=0;e<this.allPlugins.length;e++){const n=this.allPlugins[e];null===(t=n.initialize)||void 0===t||t.call(n)}return _e(),this}function Ge(){Qe()}function Je(){Qe(),_e()}function _e(){var e;nt(),window.addEventListener("pageshow",nt);for(let t=0;t<window.mrujs.allPlugins.length;t++){const n=window.mrujs.allPlugins[t];null===(e=n.connect)||void 0===e||e.call(n)}window.mrujs.connected=!0}function Qe(){var e;window.removeEventListener("pageshow",nt);for(let t=0;t<window.mrujs.allPlugins.length;t++){const n=window.mrujs.allPlugins[t];null===(e=n.disconnect)||void 0===e||e.call(n)}window.mrujs.connected=!1}function Ye(e){return window.confirm(e)}function Ze(e,t){for(const t of e){let e;e="attributes"===t.type?[t.target]:Array.from(t.addedNodes),window.setTimeout((()=>{var t;for(let n=0;n<window.mrujs.allPlugins.length;n++){const r=window.mrujs.allPlugins[n];null===(t=r.observerCallback)||void 0===t||t.call(r,e)}}),0)}}function et(e,t={}){let{element:n,submitter:r,dispatchEvents:o}=t;delete t.element,delete t.submitter,delete t.dispatchEvents;const i=Z(e,t);return!0===o?(null==n&&(n=document.documentElement),void E.call(n,j,{detail:{element:n,fetchRequest:i,request:i.request,submitter:r}})):window.fetch(i.request)}function tt(e){return e.forEach((e=>{const{shortcut:t,header:n}=e;window.mrujs.mimeTypes[t]=n})),window.mrujs.mimeTypes}function nt(){const{formEnableSelector:e,linkDisableSelector:t}=window.mrujs;g(`${e}, ${t}`).forEach((e=>{We(e)}))}function rt(){return B("csp-nonce")}const ot=Ke(),{$:it,CSRFProtection:lt,buttonClickSelector:at,buttonDisableSelector:ct,cspNonce:ut,csrfParam:st,csrfToken:dt,confirm:ft,delegate:mt,disableElement:bt,enableElement:ht,fileInputSelector:pt,fire:vt,formDisableSelector:gt,formElements:wt,formEnableSelector:St,formInputClickSelector:Et,formSubmitSelector:Ct,handleConfirm:yt,handleDisabledElement:kt,handleMethod:jt,inputChangeSelector:At,linkClickSelector:Tt,linkDisableSelector:Rt,matches:Nt,preventInsignificantClick:xt,refreshCSRFTokens:qt,start:Pt,stopEverything:Lt,FetchResponse:Dt,FetchRequest:$t}=ot;e.$=it,e.CSRFProtection=lt,e.FetchRequest=$t,e.FetchResponse=Dt,e.Mrujs=Ke,e.buttonClickSelector=at,e.buttonDisableSelector=ct,e.confirm=ft,e.cspNonce=ut,e.csrfParam=st,e.csrfToken=dt,e.default=ot,e.delegate=mt,e.disableElement=bt,e.enableElement=ht,e.fileInputSelector=pt,e.fire=vt,e.formDisableSelector=gt,e.formElements=wt,e.formEnableSelector=St,e.formInputClickSelector=Et,e.formSubmitSelector=Ct,e.handleConfirm=yt,e.handleDisabledElement=kt,e.handleMethod=jt,e.inputChangeSelector=At,e.linkClickSelector=Tt,e.linkDisableSelector=Rt,e.matches=Nt,e.mrujs=ot,e.preventInsignificantClick=xt,e.refreshCSRFTokens=qt,e.start=Pt,e.stopEverything=Lt,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=index.umd.min.js.map
